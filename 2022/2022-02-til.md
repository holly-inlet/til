# TIL —— 2022/02

## 要約

## 目次

- [2022/02/01(Tue)](#20220201tue) —— Webアプリ開発：環境構築
- [2022/02/02(Wen)](#20220202wen) —— Webアプリ開発：環境構築，FlaskでHello World
- [2022/02/03(Thu)](#20220203thu) —— Webアプリ開発：FlaskでToDoアプリ写経
- [2022/02/04(Fri)](#20220204fri) —— Webアプリ開発：オブジェクト化＆MySQL使用断念
- [2022/02/05(Sat)](#20220205sat) —— Webアプリ開発：Bootstrap＆Heroku
- [2022/02/06(Sun)](#20220206sun)
- [2022/02/07(Mon)](#20220207mon)
- [2022/02/08(Tue)](#20220208tue)
- [2022/02/09(Wen)](#20220209wen)
- [2022/02/10(Thu)](#20220210thu)
- [2022/02/11(Fri)](#20220211fri)
- [2022/02/12(Sat)](#20220212sat)
- [2022/02/13(Sun)](#20220213sun)
- [2022/02/14(Mon)](#20220214mon)
- [2022/02/15(Tue)](#20220215tue)
- [2022/02/16(Wen)](#20220216wen)
- [2022/02/17(Thu)](#20220217thu)
- [2022/02/18(Fri)](#20220218fri)
- [2022/02/19(Sat)](#20220219sat)
- [2022/02/20(Sun)](#20220220sun)
- [2022/02/21(Mon)](#20220221mon)
- [2022/02/22(Tue)](#20220222tue)
- [2022/02/23(Wen)](#20220223wen)
- [2022/02/24(Thu)](#20220224thu)
- [2022/02/25(Fri)](#20220225fri)
- [2022/02/26(Sat)](#20220226sat)
- [2022/02/27(Sun)](#20220227sun)
- [2022/02/28(Mon)](#20220228mon)

---

### 2022/02/01(Tue)

- Webアプリ開発  
  *所用時間：195分*
  - Githubにリポジトリを作成　→ [hi-action-log](https://github.com/holly-inlet/hi-action-log)
  - Docker上で環境構築
    - Docker imageからubuntu:latestのimageをpull
    - ubuntu imageをrunし，hi-action-logコンテナを作成
      - しかし，hi-action-logコンテナが起動しない
    - 一度作成したコンテナを消去し，`$ docker run --name hi-action-log -it ubuntu bash`で再度コンテナを作成・コンテナの中に入ってみる
      - 無事コンテナが起動し，コンテナの中に入ることに成功
    - コンテナの中でaptにより`update`と`-y upgared`
      - cf. [Python 3をインストールしUbuntu 20.04サーバーにプログラミング環境を設定する方法](https://www.digitalocean.com/community/tutorials/how-to-install-python-3-and-set-up-a-programming-environment-on-an-ubuntu-20-04-server-ja)
      - なぜか`sudo`が使えなかったが，aptはできたので一旦は無視することにした
    - コンテナの中で`# apt install python3-pip`でコンテナにPythonをインストール
      - Python 3.8.10インストール完了
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：60分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1488479822955175936)  
    > ポートフォリオを制作するための環境構築をした。  
    > Githubにリポジトリを作りクローン。あとはDockerでコンテナを作り必要なソフトをインストールした。去年行ったはずだが，また苦戦した

### 2022/02/02(Wen)

- Webアプリ開発  
  *所用時間：245分*
  - cf. 参考記事  
    (1) [【保存版】30分でFlask入門！Webアプリの作り方をPythonエンジニアが解説——テックダイアリー](https://tech-diary.net/flask-introduction/)  
    (2) [VS CodeとFlaskによるWebアプリ開発「最初の一歩」——＠IT](https://atmarkit.itmedia.co.jp/ait/articles/1807/24/news024.html)  
    (3) [チュートリアル——Flask](https://msiz07-flask-docs-ja.readthedocs.io/ja/latest/tutorial/index.html)
  - dockerコンテナに入り`$ pip install flask`でFlask 2.0.2をインストール。`$ pip freeze`でインストールの確認
  - (2)の始めの通りに最小のFlaskアプリを書いて`$ set FLASK_APP=app.py`→`$ flask run`してみる。しかしエラー。

    ~~~bash
    Error: Could not locate a Flask application. You did not provide the "FLASK_APP" environment variable, and a "wsgi.py" or "app.py" module was not found in the current directory.
    ~~~

  - もう一度dockerコンテナを作成し直してみる。今度はポートのマッピングやファイルにマウントも行った  
    cf. [Docker、ボリューム(Volume)について真面目に調べた——@gounx2｜Qiita](https://qiita.com/gounx2/items/23b0dc8b8b95cc629f32)  
    cf. [Docker の Volume がよくわからないから調べた——@aki_55p｜Qiita](https://qiita.com/aki_55p/items/63c47214cab7bcb027e0)
    - `$ docker run -p 8888:8888 -v ~/hi-action-log:/workspace --name hi-action-log -it ubuntu bash`
    - aptの`update`と`-y upgrade`
    - `$ apt install python3-pip`。`$ python3 --version`でPython 3.8.10のインストール確認
    - `$ pip install flask`。`$ pip freeze`でFlask 2.0.2のインストール確認
    - `$ set FLASK_APP=app.py`→`$ flask run`
    - 再度同じエラー
  - dockerコンテナを出て，ホームディレクトリで`$ python3 --version`してみると何故かPython 3.9.5が入っていた
    - 取り敢えず(2)に従ってvenvで仮想環境を構築してみる
    - `$ cd hi-action-log` → `$ python3 -m venv myenv`でhi-action-logフォルダ内に仮想環境作成
    - `$ source ~/hi-action-log/myenv/bin/activate`  
      cf. [【Python3×VSCode】実行環境を分ける必要が出たら行う手順（仮想環境作成）——@some-nyan｜Qiita](https://qiita.com/some-nyan/items/7f20fa5fa0b6e451a42b)
      - 仮想環境には入れたが，VSCodeでインタプリタに設定できない
    - [VSCode にPython仮想環境を追加する——@coffeebeater｜Qiita](https://qiita.com/coffeebeater/items/ebe2d7802e64e3af3027)を参考に設定してみる
      - できない
    - VSCodeの「Python: Venv Path」設定から仮想環境管理用ディレクトリのパスを設定  
      cf. [【Python3×VSCode】実行環境を分ける必要が出たら行う手順（仮想環境作成）——@some-nyan｜Qiita](https://qiita.com/some-nyan/items/7f20fa5fa0b6e451a42b)
      - インタプリタに仮想環境が表示される。成功
  - もう一度Flaskでapp.pyを実行
    - 再度同じエラー
  - (1)に従い，すでに書いたapp.pyに以下のコードを追加
  
    ~~~python
    if __name__ == "__main__":
        app.run(debug=True)
    ~~~

    - `$ python app.py`を実行し，表示されたローカルホストにアクセス
      - 成功。ブラウザ上で「Hello World」が表示される
  
  > dockerでもvenvでも同じエラーが出ており，これならdockerでも同じようにすれば解決できたかもしれない。ただ，ここまで来るとvenvの方が速く作業に入れるので，これからはvenvの仮想環境で進める

  - venvで仮想環境を構築したときに作られたmyenvのgitステージング待ちが膨大な量になっているので，gitignoreした方が良さそう  
    cf. [.gitignoreについて——@sf213471118｜Qiita](https://qiita.com/sf213471118/items/efbc0abf028a3ead72e7)  
    cf. [.gitignore の書き方——@inabe49｜Qiita](https://qiita.com/inabe49/items/16ee3d9d1ce68daa9fff)
    - hi-action-logディレクトリに.gitignoreフォルダを作成。`/myenv`を記入
      - gitのステージング待ちが解消
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：125分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1488479822955175936)  
    > 昨日環境構築はできたと思ったが，最小のFlaskアプリを実行できず，もう一度やり直した。結局問題は仮想環境ではないらしく，アプリ内のコードを別の方法に変え“Hello World!"を表示できた  
    > 同じことを何度も繰り返し，結局最初の方に発見した解決策に少し変化を加えるだけで良かったことが何度もあった。そんな徒労を浪費している間に大分計画は遅れた。今日は基盤となるToDoアプリを試しに作ってみる所まで行きたかったが，Hello Worldに1日かかった。前途多難である

### 2022/02/03(Thu)

- Webアプリ開発  
  *所用時間：225分*
  - (3-1) [【保存版】30分でFlask入門！Webアプリの作り方をPythonエンジニアが解説——テックダイアリー](https://tech-diary.net/flask-introduction/)に従って進める
    - `$ pip install flask-sqlalchemy`でSQLalchemyをインストール
    - (3-1)の「5-2 データベースの項目定義」の箇所で`>>> from app import db`→`>>> db.create_all()`するとImport Error
    - SQLAlchemyがインストールできているか確認。`>>> imoprt sqlalchemy`→`>>> sqlalchemy.__version__`  
      cf. [Sqlalchemy-introduction](https://www.finddevguides.com/Sqlalchemy-introduction)
      - 1.4.31が入っていることを確認
    - もう一度`>>> from app import db`
      - AttributeError: 'Flask' object has no attribute 'comfig'
    - app.pyの`app.config["SQLALCHEMY_DATABASE_URI"]`の箇所にスペルミスがあった。修正
    - `>>> from app import db`→`>>> db.create_all()`
      - 成功。hi-action-logディレクトリ内にtodo.dbが作成された
    - (3-1)の「STEP11」まで完了
  - (3-2) [VS CodeとFlask-SQLAlchemyでデータベース操作——@IT](https://atmarkit.itmedia.co.jp/ait/articles/1808/07/news029.html)を参考にこれまでに書いたコードをオブジェクト化してみる
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：70分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1489199812738117636)  
    > 記事を参考に，昨日予定していたFlaskによるToDoアプリの写経を行った。その後別の記事を参考にオブジェクトを使い書き換えようとしたが，難しく苦戦。計画の遅れは昨日から変わらず

### 2022/02/04(Fri)

- Webアプリ開発  
  *所用時間：135分*
  - 昨日に引き続き(4) [VS CodeとFlask-SQLAlchemyでデータベース操作——@IT](https://atmarkit.itmedia.co.jp/ait/articles/1808/07/news029.html)を参考にこれまでに書いたコードをオブジェクト化してみる
    - どうも上手くできないので，ひとまずオブジェクト化は後回しにする。
  - データベースをMySQLに変更する
    - cf. 参考記事
      - [Flask-SQLAlchemyの基本的な使い方。MySQLを使います](https://www.tcom242242.net/entry/python-basic/flask-sqlalchemy%E3%81%AE%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9%E3%80%82mysql%E3%82%92%E4%BD%BF%E3%81%84%E3%81%BE%E3%81%99/)
      - [FlaskでMySQLを使う方法](https://masublog.net/flask/flask%E3%81%A7mysql%E3%82%92%E4%BD%BF%E3%81%86%E6%96%B9%E6%B3%95/)
      - [Flask SQLAlchemyを使用したSQLiteからMySQLへの切り替え](https://jpcodeqa.com/q/fc556b073a8c3a4b79a7746c978804b7)
      - [Python3でMySQLを操作する](https://kzhishu.hatenablog.jp/entry/2017/06/03/162911)
      - [MySQLに接続してデータ操作を行う](https://www.yoheim.net/blog.php?q=20151102)
      - [MySQLの使い方](https://www.dbonline.jp/mysql/)
      - [【初心者でもわかるMySQL入門】MySQLの使い方を基礎からマスター](https://26gram.com/mysql)
    - 何から始めればよいのか全くわからず動けなくなってしまったので，ひとまずMySQLの使用は後回しにする。
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：195分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1489549188371128322)  
    >　予定していたタスクを行おうと色々と調べたが，結局解決できず，今日は何も進捗がなかった。  
    >　まず，昨日書いたコードをオブジェクト化しようとしたが上手く行かず，時間がかかりそうなので諦めた。次に，データベースをSQLightからMySQLに変更しようとしたが，MySQLの導入やFlask-SQLAlchemyとの連携の仕方がわからず，これも時間がかかりそうなので諦めた。しかし，こんな様子で何が作れるのか  
    >　正直，エンジニアへの適性の無さを感じる。わからないことを調べるとさらにわからないことが増え，頭の中が収集つかなくなっていくのがとても不快である。何かを作るのは好きなはずであるし，何かを学ぶのも好きなはずだが，何故今こんなにも辛く楽しくないのだろうか？  
    >　その理由を考えてみると，思い当たったのは「他人の期待に応えようとしているから」であった。今は企業に求められ，2月中頃までに成果物を作ろうとしている。そもそも，期日が短く無茶な挑戦であることに加え，その動機づけが「他人の期待」であることで，自分の楽しみに焦点が向いていないのだろう  
    >　そこで，仮に企業の要求を無視して自分の作りたいように作ることを想像してみると，途端に気が楽になった。エンジニアリングを諦めないことを重視するならその選択が良いのかもしれない。ただし，他人の期待に応えるのが嫌だという人間に，一体どのような仕事ができるのだろうか？  
    >　採用はマッチングであると言い，不採用だからといってそれは人格の否定ではなく，単に相性が合わなかっただけである，との話をよく聞く。しかし，コミュニケーション能力や学習能力の低さ，ネガティブ思考など，どこからも敬遠される人はいるだろう。それが人格の否定ではないとしたら何なのだろうか？  
    >　兎にも角にも，今私が考えるべきは「どの選択が良いか」である。気移りするよりは，エンジニアを目指す決断をやり通す方が良い気がする。しかし，現状はその判断に危険信号が出ている。ここで引き返すべきか，迂回するべきか，突き進むべきか，明日はどっちだ

### 2022/02/05(Sat)

- Webアプリ開発  
  *所用時間：230分*
  - (1) [【保存版】30分でFlask入門！Webアプリの作り方をPythonエンジニアが解説——テックダイアリー](https://tech-diary.net/flask-introduction/)のSTEP12以降を実施
    - Herokuアカウントを作成し，Heroku CLIをインストールしようとしたがエラー `Error: Your Command Line Tools are too outdated.`
      - OSをアップデートするが，変わらずエラー
      - [brew upgrade でのエラー対処からCommand Line Toolsについてまとめてみる](https://techracho.bpsinc.jp/wingdoor/2021_04_09/104821)を参考にコマンドラインツールをアップデート
        - `sudo rm -rf /Library/Developer/CommandLineTools`
        - `sudo xcode-select --install`
        - 再度Heroku CLIをインストール。成功
    - [heroku 初級編 - GitHub から deploy してみよう -](https://qiita.com/sho7650/items/ebd87c5dc2c4c7abb8f0)を参考にHerokuとGithubリポジトリを連携させ，アプリをデプロイする
      - デプロイしたページを見ようとしたがエラー`at=error code=H14 desc="No web processes running"`
        - [【Heroku】デプロイ後にcode=H14 desc="No web processes running"](https://qiita.com/rebi/items/efd1c36f0a9e46222d80)を参考に解決を試みる
          - `$ heroku ps:scale web=1`したが`Error: Missing required flag:`
            - [［Herokuエラー］Error: Missing required flagが出た](https://qiita.com/hirokik-0076/items/71c104158fa8b963ba85)を参考に対処
            - `$ heroku git:remote -a hi-aciton-log`しエラー解消
          - もう一度`$ heroku ps:scale web=1`したが`Scaling dynos... !　Couldn't find that process type (web).`と表示されできず
            - heroku.ymlを作成。`$ heroku stack:set container`を実行
            - `$ git push heroku main`をするがエラー，`error: failed to push some refs to`
      - 今日は解決できずに一時中断
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：65分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1489939492920127488)  
    >　記事を参考にBootstrapによるフロントエンドの実装とHerokuでのデプロイを行った。しかし，Herokuでのデプロイはエラーが解決できず，今日は中断することにした

### 2022/02/06(Sun)

### 2022/02/07(Mon)

### 2022/02/08(Tue)

### 2022/02/09(Wen)

### 2022/02/10(Thu)

### 2022/02/11(Fri)

### 2022/02/12(Sat)

### 2022/02/13(Sun)

### 2022/02/14(Mon)

### 2022/02/15(Tue)

### 2022/02/16(Wen)

### 2022/02/17(Thu)

### 2022/02/18(Fri)

### 2022/02/19(Sat)

### 2022/02/20(Sun)

### 2022/02/21(Mon)

### 2022/02/22(Tue)

### 2022/02/23(Wen)

### 2022/02/24(Thu)

### 2022/02/25(Fri)

### 2022/02/26(Sat)

### 2022/02/27(Sun)

### 2022/02/28(Mon)
