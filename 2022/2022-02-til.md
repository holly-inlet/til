# TIL —— 2022/02

## 要約

## 目次

- [2022/02/01(Tue)](#20220201tue) —— Webアプリ開発：環境構築
- [2022/02/02(Wen)](#20220202wen) —— Webアプリ開発：環境構築，FlaskでHello World
- [2022/02/03(Thu)](#20220203thu) —— Webアプリ開発：FlaskでToDoアプリ写経
- [2022/02/04(Fri)](#20220204fri)
- [2022/02/05(Sat)](#20220205sat)
- [2022/02/06(Sun)](#20220206sun)
- [2022/02/07(Mon)](#20220207mon)
- [2022/02/08(Tue)](#20220208tue)
- [2022/02/09(Wen)](#20220209wen)
- [2022/02/10(Thu)](#20220210thu)
- [2022/02/11(Fri)](#20220211fri)
- [2022/02/12(Sat)](#20220212sat)
- [2022/02/13(Sun)](#20220213sun)
- [2022/02/14(Mon)](#20220214mon)
- [2022/02/15(Tue)](#20220215tue)
- [2022/02/16(Wen)](#20220216wen)
- [2022/02/17(Thu)](#20220217thu)
- [2022/02/18(Fri)](#20220218fri)
- [2022/02/19(Sat)](#20220219sat)
- [2022/02/20(Sun)](#20220220sun)
- [2022/02/21(Mon)](#20220221mon)
- [2022/02/22(Tue)](#20220222tue)
- [2022/02/23(Wen)](#20220223wen)
- [2022/02/24(Thu)](#20220224thu)
- [2022/02/25(Fri)](#20220225fri)
- [2022/02/26(Sat)](#20220226sat)
- [2022/02/27(Sun)](#20220227sun)
- [2022/02/28(Mon)](#20220228mon)

---

### 2022/02/01(Tue)

- Webアプリ開発  
  *所用時間：195分*
  - Githubにリポジトリを作成　→ [hi-action-log](https://github.com/holly-inlet/hi-action-log)
  - Docker上で環境構築
    - Docker imageからubuntu:latestのimageをpull
    - ubuntu imageをrunし，hi-action-logコンテナを作成
      - しかし，hi-action-logコンテナが起動しない
    - 一度作成したコンテナを消去し，`$ docker run --name hi-action-log -it ubuntu bash`で再度コンテナを作成・コンテナの中に入ってみる
      - 無事コンテナが起動し，コンテナの中に入ることに成功
    - コンテナの中でaptにより`update`と`-y upgared`
      - cf. [Python 3をインストールしUbuntu 20.04サーバーにプログラミング環境を設定する方法](https://www.digitalocean.com/community/tutorials/how-to-install-python-3-and-set-up-a-programming-environment-on-an-ubuntu-20-04-server-ja)
      - なぜか`sudo`が使えなかったが，aptはできたので一旦は無視することにした
    - コンテナの中で`# apt install python3-pip`でコンテナにPythonをインストール
      - Python 3.8.10インストール完了
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：60分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1488479822955175936)  
    > ポートフォリオを制作するための環境構築をした。  
    > Githubにリポジトリを作りクローン。あとはDockerでコンテナを作り必要なソフトをインストールした。去年行ったはずだが，また苦戦した

### 2022/02/02(Wen)

- Webアプリ開発  
  *所用時間：245分*
  - cf. 参考記事  
    (1) [【保存版】30分でFlask入門！Webアプリの作り方をPythonエンジニアが解説——テックダイアリー](https://tech-diary.net/flask-introduction/)  
    (2) [VS CodeとFlaskによるWebアプリ開発「最初の一歩」——＠IT](https://atmarkit.itmedia.co.jp/ait/articles/1807/24/news024.html)  
    (3) [チュートリアル——Flask](https://msiz07-flask-docs-ja.readthedocs.io/ja/latest/tutorial/index.html)
  - dockerコンテナに入り`$ pip install flask`でFlask 2.0.2をインストール。`$ pip freeze`でインストールの確認
  - (2)の始めの通りに最小のFlaskアプリを書いて`$ set FLASK_APP=app.py`→`$ flask run`してみる。しかしエラー。

    ~~~bash
    Error: Could not locate a Flask application. You did not provide the "FLASK_APP" environment variable, and a "wsgi.py" or "app.py" module was not found in the current directory.
    ~~~

  - もう一度dockerコンテナを作成し直してみる。今度はポートのマッピングやファイルにマウントも行った  
    cf. [Docker、ボリューム(Volume)について真面目に調べた——@gounx2｜Qiita](https://qiita.com/gounx2/items/23b0dc8b8b95cc629f32)  
    cf. [Docker の Volume がよくわからないから調べた——@aki_55p｜Qiita](https://qiita.com/aki_55p/items/63c47214cab7bcb027e0)
    - `$ docker run -p 8888:8888 -v ~/hi-action-log:/workspace --name hi-action-log -it ubuntu bash`
    - aptの`update`と`-y upgrade`
    - `$ apt install python3-pip`。`$ python3 --version`でPython 3.8.10のインストール確認
    - `$ pip install flask`。`$ pip freeze`でFlask 2.0.2のインストール確認
    - `$ set FLASK_APP=app.py`→`$ flask run`
    - 再度同じエラー
  - dockerコンテナを出て，ホームディレクトリで`$ python3 --version`してみると何故かPython 3.9.5が入っていた
    - 取り敢えず(2)に従ってvenvで仮想環境を構築してみる
    - `$ cd hi-action-log` → `$ python3 -m venv myenv`でhi-action-logフォルダ内に仮想環境作成
    - `$ source ~/hi-action-log/myenv/bin/activate`  
      cf. [【Python3×VSCode】実行環境を分ける必要が出たら行う手順（仮想環境作成）——@some-nyan｜Qiita](https://qiita.com/some-nyan/items/7f20fa5fa0b6e451a42b)
      - 仮想環境には入れたが，VSCodeでインタプリタに設定できない
    - [VSCode にPython仮想環境を追加する——@coffeebeater｜Qiita](https://qiita.com/coffeebeater/items/ebe2d7802e64e3af3027)を参考に設定してみる
      - できない
    - VSCodeの「Python: Venv Path」設定から仮想環境管理用ディレクトリのパスを設定  
      cf. [【Python3×VSCode】実行環境を分ける必要が出たら行う手順（仮想環境作成）——@some-nyan｜Qiita](https://qiita.com/some-nyan/items/7f20fa5fa0b6e451a42b)
      - インタプリタに仮想環境が表示される。成功
  - もう一度Flaskでapp.pyを実行
    - 再度同じエラー
  - (1)に従い，すでに書いたapp.pyに以下のコードを追加
  
    ~~~python
    if __name__ == "__main__":
        app.run(debug=True)
    ~~~

    - `$ python app.py`を実行し，表示されたローカルホストにアクセス
      - 成功。ブラウザ上で「Hello World」が表示される
  
  > dockerでもvenvでも同じエラーが出ており，これならdockerでも同じようにすれば解決できたかもしれない。ただ，ここまで来るとvenvの方が速く作業に入れるので，これからはvenvの仮想環境で進める

  - venvで仮想環境を構築したときに作られたmyenvのgitステージング待ちが膨大な量になっているので，gitignoreした方が良さそう  
    cf. [.gitignoreについて——@sf213471118｜Qiita](https://qiita.com/sf213471118/items/efbc0abf028a3ead72e7)  
    cf. [.gitignore の書き方——@inabe49｜Qiita](https://qiita.com/inabe49/items/16ee3d9d1ce68daa9fff)
    - hi-action-logディレクトリに.gitignoreフォルダを作成。`/myenv`を記入
      - gitのステージング待ちが解消
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：125分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1488479822955175936)  
    > 昨日環境構築はできたと思ったが，最小のFlaskアプリを実行できず，もう一度やり直した。結局問題は仮想環境ではないらしく，アプリ内のコードを別の方法に変え“Hello World!"を表示できた  
    > 同じことを何度も繰り返し，結局最初の方に発見した解決策に少し変化を加えるだけで良かったことが何度もあった。そんな徒労を浪費している間に大分計画は遅れた。今日は基盤となるToDoアプリを試しに作ってみる所まで行きたかったが，Hello Worldに1日かかった。前途多難である

### 2022/02/03(Thu)

- Webアプリ開発  
  *所用時間：225分*
  - (3-1) [【保存版】30分でFlask入門！Webアプリの作り方をPythonエンジニアが解説——テックダイアリー](https://tech-diary.net/flask-introduction/)に従って進める
    - `$ pip install flask-sqlalchemy`でSQLalchemyをインストール
    - (3-1)の「5-2 データベースの項目定義」の箇所で`>>> from app import db`→`>>> db.create_all()`するとImport Error
    - SQLAlchemyがインストールできているか確認。`>>> imoprt sqlalchemy`→`>>> sqlalchemy.__version__`  
      cf. [Sqlalchemy-introduction](https://www.finddevguides.com/Sqlalchemy-introduction)
      - 1.4.31が入っていることを確認
    - もう一度`>>> from app import db`
      - AttributeError: 'Flask' object has no attribute 'comfig'
    - app.pyの`app.config["SQLALCHEMY_DATABASE_URI"]`の箇所にスペルミスがあった。修正
    - `>>> from app import db`→`>>> db.create_all()`
      - 成功。hi-action-logディレクトリ内にtodo.dbが作成された
    - (3-1)の「STEP11」まで完了
  - (3-2) [VS CodeとFlask-SQLAlchemyでデータベース操作——@IT](https://atmarkit.itmedia.co.jp/ait/articles/1808/07/news029.html)を参考にこれまでに書いたコードをオブジェクト化してみる
- ニュース記事閲覧・Twitter・TIL  
  *所用時間：70分*
  - [@HollyInlet——Twitter](https://twitter.com/HollyInlet/status/1489199812738117636)  
    > 記事を参考に，昨日予定していたFlaskによるToDoアプリの写経を行った。その後別の記事を参考にオブジェクトを使い書き換えようとしたが，難しく苦戦。計画の遅れは昨日から変わらず

### 2022/02/04(Fri)

### 2022/02/05(Sat)

### 2022/02/06(Sun)

### 2022/02/07(Mon)

### 2022/02/08(Tue)

### 2022/02/09(Wen)

### 2022/02/10(Thu)

### 2022/02/11(Fri)

### 2022/02/12(Sat)

### 2022/02/13(Sun)

### 2022/02/14(Mon)

### 2022/02/15(Tue)

### 2022/02/16(Wen)

### 2022/02/17(Thu)

### 2022/02/18(Fri)

### 2022/02/19(Sat)

### 2022/02/20(Sun)

### 2022/02/21(Mon)

### 2022/02/22(Tue)

### 2022/02/23(Wen)

### 2022/02/24(Thu)

### 2022/02/25(Fri)

### 2022/02/26(Sat)

### 2022/02/27(Sun)

### 2022/02/28(Mon)
